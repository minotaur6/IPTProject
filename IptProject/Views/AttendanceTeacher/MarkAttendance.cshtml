@using IptProject.Models.Attendance
@model MarkAttendanceVM

@{
    ViewBag.Title = "MarkAttendance";
    Layout = "~/Views/Shared/_PortalLayout.cshtml";
}

<h2>Mark Attendance</h2>
<div class="content">
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-12">
                <div class="card">
                    <div class="card-header card-header-primary">
                        <h4 class="card-title">Manage Attendance</h4>
                    </div>
                    <div class="card-body">
                        <form>
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label>Teacher Name</label>


                                        @foreach (var item in Model.employees)
                                        {
                                    
                                            <input class="form-control" type="text" placeholder="@item.EmpName" disabled>
                                            
                                        }





                                    </div>
                                </div>
                                <div class="col-md-8">
                                    <div class="form-group">
                                        <label>Offered Courses</label>
                                        <select class="form-control bootstrap-select " id="courseSelected">
                                            <option selected hidden disabled >Select Course</option>
                                            @foreach (var item in Model.courses)
                                            {
                                                if (item.CourseID != 0)
                                                {
                                                    <option value="@item.CourseID">@item.CourseCode - @item.CourseName</option>

                                                }

                                            }
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label>Campus</label>
                                        <select class="form-control">
                                            <option>Karachi</option>
                                            <option>Islamabad</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label>Semester</label>
                                        <select class="form-control">
                                            
                                                <option selected hidden disabled>Select Semester</option>
                                                @foreach (var item in Model.semesters)
                                                {
                                                    
                                                        <option value="@item.SemesterID">@item.SemesterName</option>

                                                    

                                                }                                                                                  
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="form-group">
                                        <label>Section</label>
                                        <select class="form-control ">
                                            <option selected hidden disabled>Select Section</option>
                                            @foreach (var item in Model.sections)
                                             {
                                                if (item.SectionID != 0)
                                                {
                                                    <option value="@item.SectionID">@item.SectionName</option>

                                                }

                                             }
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-12 ">

                                    <button type="submit" class="btn btn-success pull-right">Add New</button>
                                    <button type="submit" class="btn btn-primary pull-right">Edit</button>
                                </div>
                            </div>
                            @*
                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="alert alert-info">
                                            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                                                <i class="material-icons">close</i>
                                            </button>
                                            <span>
                                                <b> Info - </b> This is a regular notification made with ".alert-info"
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            *@
                        </form>

                        <form>
                            <div class="row">
                                <div class="col-md-12">
                                    <table class="table table-bordered">
                                        <thead class="card-header card-header-primary">
                                            <tr>
                                                <th scope="col">S.No</th>
                                                <th scope="col">Date</th>
                                                @*<th scope="col">Edit</th>*@
                                                <th scope="col">Delete</th>
                                                <th></th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>1</td>
                                                <td>2020-06-14</td>
                                                @*<td><button type="submit" class="btn btn-primary pull-right">Edit</button></td>*@
                                                <td>
                                                    <button type="submit" class="btn btn-danger pull-right">Delete</button>
                                                </td>
                                                <td></td>
                                            </tr>
                                            <tr>
                                                <td>2</td>
                                                <td>2020-06-15</td>
                                                @*<td><button type="submit" class="btn btn-primary pull-right">Edit</button></td>*@
                                                <td>
                                                    <button type="submit" class="btn btn-danger pull-right">Delete</button>
                                                </td>
                                                <td></td>
                                            </tr>
                                            <tr>
                                                <td>3</td>
                                                <td>2020-06-16</td>
                                                @*<td><button type="submit" class="btn btn-primary pull-right">Edit</button></td>*@
                                                <td>
                                                    <button type="submit" class="btn btn-danger pull-right">Delete</button>
                                                </td>
                                                <td></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>

                            <div class="clearfix"></div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>



<script>
    $(function () {
        $("#courseSelected").change(function () {
            var courseID = $("#courseSelected").children("option:selected").val();
            var check = "";
            debugger
            if (courseID != 0) {
                check = $("#courseSelected").children("option:selected").html()
            }

          
                $.get('https://localhost:44380/api/AttendanceTeacher/GetTeacherSections/'+ courseID, function(data, status){
                    alert("Data: " + data + "\nStatus: " + status);
                });
           

           /* $.ajax({

                url: 'https://localhost:44380/api/AttendanceTeacher/GetTeacherSection/'+ courseID,
                type: "get", //send it through get method
                *//*data: {
                    courseID: courseID
                },*//*
                crossDomain: true,
                success: function (response) {
                    alert("Task complete!");
                    location.reload(true);
                },
                error: function (xhr, status, error, response) {
                    alert(response);
                    //location.reload(true);
                }
            }).done(function () {
                            alert("DOne");
                        });
*/

        });

    });

</script>